---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import { Image } from 'astro:assets';

const posts = (await getCollection('blog')).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout>
  <div class="w-[960px] max-w-[calc(100%-2em)] mx-auto py-12 px-4">
    <section>
      <ul class="flex flex-wrap gap-8 list-none m-0 p-0">
        {
          posts.map((post, index) => (
            <li class={index === 0 ? 'w-full mb-4 text-center' : 'w-[calc(50%-1rem)] max-md:w-full max-md:text-center'}>
              <a href={`/blog/${post.id}/`} class="block no-underline transition-all duration-200 hover:no-underline">
                {post.data.heroImage && (
                  <Image
                    width={720}
                    height={360}
                    src={post.data.heroImage}
                    alt=""
                    class={`mb-2 rounded-xl transition-shadow hover:shadow-lg ${index === 0 ? 'w-full' : ''}`}
                  />
                )}
                <h4
                  class={`m-0 text-black leading-none hover:text-[var(--accent)] ${index === 0 ? 'text-[2.369rem] max-md:text-[1.563em]' : ''}`}
                >
                  {post.data.title}
                </h4>
                <p class="m-0 text-gray-600 hover:text-[var(--accent)]">
                  <FormattedDate date={post.data.pubDate} />
                </p>
              </a>
            </li>
          ))
        }
      </ul>
    </section>
  </div>
</Layout>
