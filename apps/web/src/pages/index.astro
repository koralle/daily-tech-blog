---
import Layout from '../layouts/Layout.astro';
import { getLatestArticles } from '../utils';
import FormattedDate from '../components/FormattedDate.astro';
import { css } from '../../styled-system/css';
import { stack } from '../../styled-system/patterns';

const latestArticles = await getLatestArticles(5);
---

<Layout>
  <div class={stack({ gap: '12', py: '12' })}>
    <section class={stack({ gap: '4' })}>
      <h1 class={css({ fontSize: '4xl', fontWeight: 'bold', color: 'gray.900' })}>
        Welcome to kollog
      </h1>
      <p class={css({ fontSize: 'lg', color: 'gray.600', lineHeight: 'relaxed' })}>
        koralle's daily tech blog. 技術的なメモや、日々の学びを記録しています。
        「自分がついつい記事を書きたくなる」ような場所を目指して。
      </p>
    </section>

    <section class={stack({ gap: '6' })}>
      <div class={css({ display: 'flex', justifyContent: 'space-between', alignItems: 'baseline' })}>
        <h2 class={css({ fontSize: '2xl', fontWeight: 'semibold', color: 'gray.800' })}>
          Latest Articles
        </h2>
        <a href="/page/1" class={css({ color: 'rosePink.600', hover: { textDecoration: 'underline' } })}>
          View all →
        </a>
      </div>

      <ul class={stack({ gap: '8' })}>
        {
          latestArticles.map((article) => (
            <li class={stack({ gap: '2' })}>
              <div class={css({ fontSize: 'sm', color: 'gray.500' })}>
                <FormattedDate date={article.data.publishedDate} />
              </div>
              <a
                href={`/articles/${article.id}`}
                class={css({
                  fontSize: 'xl',
                  fontWeight: 'medium',
                  color: 'gray.900',
                  hover: { color: 'rosePink.600' },
                  transition: 'color 0.2s'
                })}
              >
                {article.data.title}
              </a>
              <p class={css({ color: 'gray.600', lineClamp: 2 })}>
                {article.data.description}
              </p>
            </li>
          ))
        }
      </ul>
    </section>
  </div>
</Layout>
